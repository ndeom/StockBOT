(this["webpackJsonpstock-game"]=this["webpackJsonpstock-game"]||[]).push([[0],{54:function(e,t,a){e.exports=a(72)},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(42),l=a.n(i),c=(a(59),a(21)),s=a(22),o=a(28),d=a(27),u=(a(60),a(1)),m=a(17);a(61);var h=function(){return r.a.createElement("div",{id:"homeContainer",className:"routeContainer"},r.a.createElement("h1",{id:"homeTitle"},"StockBOT"),r.a.createElement("br",null),r.a.createElement("p",null,"Welcome to StockBOT! You will be pitted against a machine-learning algorithm to see who can get the biggest return on investment. Here's how the game is played:"),r.a.createElement("ol",{id:"gameRules"},r.a.createElement("li",null,'A random stock and year will be chosen when you press "Start."'),r.a.createElement("li",null,'The graph will start trending, and you can press "Buy" to purchse a stock on the current date.'),r.a.createElement("li",null,'Once a stock has been purchased you can sell the stock on the current date by pressing "Sell," or you can hold the stock by not pressing anything and waiting for time to run out.'),r.a.createElement("li",null,"Once time has ended, you will be ranked alongside the machine-learning algorithm and the market."),r.a.createElement("li",null,"May the best trader win!")),r.a.createElement("br",null),r.a.createElement(m.b,{to:"/game"},r.a.createElement("button",{id:"playButton"},"Play")))},p=a(19),y=a.n(p),g=a(44),f=a(9);a(68),a(69);var v=function(){return r.a.createElement("div",{id:"legendContainer"},r.a.createElement("h1",{id:"legendTitle"},"Legend"),r.a.createElement("div",{className:"legendRow"},r.a.createElement("svg",{className:"svgCircle",width:"14",height:"14"},r.a.createElement("circle",{id:"playerBuyLegend",cx:"7",cy:"7",r:"7"})),r.a.createElement("div",{className:"legendText"},"Player Buy")),r.a.createElement("div",{className:"legendRow"},r.a.createElement("svg",{className:"svgCircle",width:"14",height:"14"},r.a.createElement("circle",{id:"playerSellLegend",cx:"7",cy:"7",r:"7"})),r.a.createElement("div",{className:"legendText"},"Player Sell")),r.a.createElement("div",{className:"legendRow"},r.a.createElement("svg",{className:"svgCircle",width:"16",height:"16"},r.a.createElement("circle",{id:"aiBuyLegend",cx:"8",cy:"8",r:"7"})),r.a.createElement("div",{className:"legendText"},"AI Buy")),r.a.createElement("div",{className:"legendRow"},r.a.createElement("svg",{className:"svgCircle",width:"16",height:"16"},r.a.createElement("circle",{id:"aiSellLegend",cx:"8",cy:"8",r:"7"})),r.a.createElement("div",{className:"legendText"},"AI Sell")))};a(70);var E=function(e){var t=new Date(e.time);return"number"===typeof e.time&&(t=new Intl.DateTimeFormat("en-US").format(t)),r.a.createElement("div",{id:"scoreboardContainer"},r.a.createElement("h1",{id:"scoreboardTitle"},"Stats"),r.a.createElement("h2",{className:"stats"},"Current Date"),r.a.createElement("div",{className:"statsText time"},t.toString()),r.a.createElement("h2",{className:"stats"},"Current Price"),r.a.createElement("div",{className:"statsGroup"},r.a.createElement("svg",{id:"trendSVG",height:"16",width:"16"},r.a.createElement("polygon",{className:"".concat(e.price>=e.previousPrice?"trendUp":"trendDown"),points:"".concat(e.price>=e.previousPrice?"8,0 16,16 0,16":"0,0 16,0 8,16")})),r.a.createElement("div",{className:"statsText price"},e.price)),r.a.createElement("h2",{className:"stats"},"Player Buy"),r.a.createElement("div",{className:"statsText price buy"},e.playerBuys.price),r.a.createElement("h2",{className:"stats"},"Player Sell"),r.a.createElement("div",{className:"statsText price sell"},e.playerSells.price),r.a.createElement("h2",{className:"stats"},"AI Buy"),r.a.createElement("div",{className:"statsText price buy"},e.time>=e.aiBuys.time?e.aiBuys.price:""),r.a.createElement("h2",{className:"stats"},"AI Sell"),r.a.createElement("div",{className:"statsText price sell"},e.time>=e.aiSells.time?e.aiSells.price:""))},b=a(82),x=a(84),S=a(80),w=a(81),k=a(79),B=a(36),C=a(85),N=a(83),O=(a(71),function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={speed:.5,data:null,dataIndex:0,dataTime:"",dataPrice:"",previousPrice:"",playerBuys:{time:"",price:""},playerSells:{time:"",price:""},aiBuys:{time:"",price:""},aiSells:{time:"",price:""}},n.createChart=n.createChart.bind(Object(f.a)(n)),n.animateChart=n.animateChart.bind(Object(f.a)(n)),n.handleClick=n.handleClick.bind(Object(f.a)(n)),n.handleSlide=n.handleSlide.bind(Object(f.a)(n)),n.createResults=n.createResults.bind(Object(f.a)(n)),n.chartRef=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/data").then((function(t){t.ok&&t.json().then((function(t){var a={data:JSON.parse(t.data),stock:t.stock},n=a.data.data.map((function(t,n){if(1===t[1]&&!e.state.aiBuys.time)return{time:a.data.index[n],price:t[0]}})).filter((function(e){if(e)return e})),r=a.data.data.map((function(t,n){if(-1===t[1]&&!e.state.aiSells.time)return{time:a.data.index[n],price:t[0]}})).filter((function(e){if(e&&e.time>n[0].time)return e}));e.setState({data:a,dataTime:a.data.index[0],aiBuys:n[0]?n[0]:"",aiSells:r[0]?r[0]:""},e.createChart)}))}))}},{key:"createChart",value:function(){var e=this.chartRef.current,t=this.state.data,a=t.data,n=t.stock,r=a.index.map((function(e,t){return[e,a.data[t]]})),i={top:50,right:0,bottom:50,left:0},l=Object(b.a)().range([i.left,1e3-i.right]),c=Object(x.a)().range([i.top,600-i.bottom]),s=Object(k.a)(e).append("g").attr("id","xAxis").attr("transform","translate(0, "+(600-i.bottom)+")"),o=Object(k.a)(e).append("g").attr("id","yAxis").attr("transform","translate("+i.left+", 0)"),d=C.a().x((function(e){return l(e[0])})).y((function(e){return c(e[1][0])})),u=Object(k.a)(e).append("path").attr("id","path"),m=Object(k.a)(e).selectAll("circle").data(r).enter().append("circle").attr("cx",(function(e){return l(e[0])})).attr("cy",(function(e){return c(e[1][0])}));Object(k.a)(e).append("text").attr("id","chartTitle").attr("x",440).attr("y",i.top).text("".concat(n));this.animateChart(e,l,c,s,o,d,u,m,i,1e3,600)}},{key:"animateChart",value:function(){var e=Object(g.a)(y.a.mark((function e(t,a,n,r,i,l,c,s,o,d,u){var m,h,p,g,f,v,E=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m=this.state.data,h=m.data,m.stock,p=h.index.map((function(e,t){return[e,h.data[t]]})),g=function(e){return new Promise((function(t){return setTimeout(t,e)}))},v=y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.slice(0,f+1),E.setState((function(e){return{dataIndex:f,dataTime:t[t.length-1][0],dataPrice:t[t.length-1][1][0],previousPrice:e.dataPrice}})),a.domain([Object(S.a)(p,(function(e){return e[0]})),p[f][0]]),n.domain([Object(w.a)(t,(function(e){return e[1][0]}))+5,Object(S.a)(t,(function(e){return e[1][0]}))-5]),r.call(Object(B.a)(a).tickSizeOuter(0)),i.call(Object(B.b)(n).tickSize(d-o.left-o.right).tickFormat(Object(N.a)(".2f"))),c.attr("d",l(p)),s.attr("cx",(function(e){return a(e[0])})).attr("cy",(function(e){return n(e[1][0])})).attr("class",(function(e){return e[0]===E.state.playerBuys.time?"dot playerBuy":e[0]===E.state.playerSells.time&&E.state.playerBuys.time?"dot playerSell":e[0]===E.state.aiBuys.time?"dot aiBuy":e[0]===E.state.aiSells.time&&E.state.aiBuys.time?"dot aiSell":"dot"})).attr("r",7),e.next=10,g(1e3*(1-E.state.speed));case 10:case"end":return e.stop()}}),e)})),f=0;case 5:if(!(f<p.length)){e.next=10;break}return e.delegateYield(v(),"t0",7);case 7:f++,e.next=5;break;case 10:this.createResults();case 11:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r,i,l,c,s,o,d,u){return e.apply(this,arguments)}}()},{key:"createResults",value:function(){var e=(window.innerWidth+window.outerWidth)/2,t=(window.innerHeight+window.outerHeight)/2,a=(t-300)/2,n=(e-400)/2,r={who:"Player",return:0},i={who:"AI",return:0};if(this.state.playerBuys.price){var l=this.state.playerBuys.price,c=this.state.playerSells.price?this.state.playerSells.price:this.state.dataPrice;r.return=(c-l)/l}if(this.state.aiBuys.price){var s=this.state.aiBuys.price,o=this.state.aiSells.price?this.state.aiSells.price:this.state.dataPrice;i.return=(o-s)/s}var d=this.state.data.data.data[0][0],u={who:"Market",return:(this.state.dataPrice-d)/d};Object(k.a)("#chartContainer").append("div").html((function(){var e=[r,i,u].sort((function(e,t){return t.return-e.return})).map((function(e){return e.return=Object(N.a)(".2%")(e.return),e}));return'<div id="resultsTitle">Results:</div><br><br>\n           1. '.concat(e[0].who,": ").concat(e[0].return," <br>\n           2. ").concat(e[1].who,": ").concat(e[1].return," <br>\n           3. ").concat(e[2].who,": ").concat(e[2].return)})).attr("id","resultsHTML").style("top",2*t+"px").style("left",n+"px").transition().duration(1e3).style("top",a+"px").style("left",n+"px")}},{key:"handleClick",value:function(e){console.log("e.target button: ",e.target.textContent),"Buy"!==e.target.textContent||this.state.playerBuys.time||(console.log("state set to BUY"),this.setState((function(e){return{playerBuys:{time:e.data.data.index[e.dataIndex],price:e.data.data.data[e.dataIndex][0]}}}),console.log(this.state))),"Sell"===e.target.textContent&&this.state.playerBuys.time&&!this.state.playerSells.time&&(console.log("state set to SELL"),this.setState((function(e){return{playerSells:{time:e.data.data.index[e.dataIndex],price:e.data.data.data[e.dataIndex][0]}}}),console.log(this.state)))}},{key:"handleSlide",value:function(e){console.log("inside handleSlide"),console.log("e.target.value:",e.target.value),this.setState({speed:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{id:"chartContainer"},r.a.createElement("div",{className:"col",id:"col1"},r.a.createElement(E,{time:this.state.dataTime,price:this.state.dataPrice,previousPrice:this.state.previousPrice,playerBuys:this.state.playerBuys,playerSells:this.state.playerSells,aiBuys:this.state.aiBuys,aiSells:this.state.aiSells})),r.a.createElement("div",{className:"col",id:"col2"},r.a.createElement("svg",{id:"chart",ref:this.chartRef,width:"1000px",height:"600px"}),r.a.createElement("div",{id:"controlsContainer"},r.a.createElement("button",{onClick:this.handleClick,id:"buyButton",className:"button"},"Buy"),r.a.createElement("div",{id:"slideContainer"},r.a.createElement("label",{for:"slider",id:"sliderLabel"},"Speed"),r.a.createElement("input",{onChange:this.handleSlide,type:"range",min:"0",max:"1",step:"0.1",value:this.state.speed,id:"slider"})),r.a.createElement("button",{onClick:this.handleClick,id:"sellButton",className:"button"},"Sell"))),r.a.createElement("div",{className:"col",id:"col3"},r.a.createElement(v,null)))}}]),a}(r.a.Component));var j=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.call(this)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"}),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(h,null)),r.a.createElement(u.a,{path:"/game"},r.a.createElement(O,null))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(m.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.9fcee33c.chunk.js.map